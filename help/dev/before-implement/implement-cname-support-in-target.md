---
keywords: kundtjÃ¤nst, namn, certifikatprogram, kanoniskt namn, cookies, certifikat, amc, adobe managed certificate, digicert, domÃ¤nkontrollsvalidering, dcv, klienttjÃ¤nst2
description: Arbeta med [!UICONTROL Adobe Client Care] fÃ¶r att implementera stÃ¶d fÃ¶r CNAME (Canonical Name) i  [!DNL Adobe Target]  fÃ¶r att hantera annonsblockeringsproblem.
title: Hur anvÃ¤nder jag CNAME i Target?
feature: Privacy & Security
exl-id: 5709df5b-6c21-4fea-b413-ca2e4912d6cb
source-git-commit: 17caf4e54d2efa372ebc6f3916f120a37d39d4a5
workflow-type: tm+mt
source-wordcount: '1169'
ht-degree: 0%

---

# CNAME och Target

Instruktioner fÃ¶r hur du arbetar med [!DNL Adobe Client Care] fÃ¶r att implementera stÃ¶d fÃ¶r CNAME (Canonical Name) i [!DNL Adobe Target]. AnvÃ¤nd CNAME fÃ¶r att hantera annonsblockeringsproblem eller ITP-relaterade (Intelligent Tracking Prevention) cookie-principer. Med CNAME sker samtal till en domÃ¤n som Ã¤gs av kunden i stÃ¤llet fÃ¶r till en domÃ¤n som Ã¤gs av Adobe.

## BegÃ¤r CNAME-stÃ¶d i Target

1. BestÃ¤m listan med vÃ¤rdnamn som du behÃ¶ver fÃ¶r ditt SSL-certifikat (se Vanliga frÃ¥gor och svar nedan).

1. FÃ¶r varje vÃ¤rdnamn skapar du en CNAME-post i din DNS som pekar pÃ¥ ditt vanliga [!DNL Target] vÃ¤rdnamn `clientcode.tt.omtrdc.net`.

   Om klientkoden till exempel Ã¤r &quot;namnkund&quot; och det fÃ¶reslagna vÃ¤rdnamnet Ã¤r `target.example.com` ser din DNS CNAME-post ut ungefÃ¤r sÃ¥ hÃ¤r:

   ```
   target.example.com.  IN  CNAME  cnamecustomer.tt.omtrdc.net.
   ```

   >[!WARNING]
   >
   >Adobe certifikatutfÃ¤rdare, DigiCert, kan inte utfÃ¤rda ett certifikat fÃ¶rrÃ¤n det hÃ¤r steget har slutfÃ¶rts. DÃ¤rfÃ¶r kan Adobe inte fullfÃ¶lja din begÃ¤ran om CNAME-implementering fÃ¶rrÃ¤n det hÃ¤r steget Ã¤r klart.

1. [Fyll i det hÃ¤r formulÃ¤ret](assets/FPC_Request_Form.xlsx) och inkludera det nÃ¤r du [Ã¶ppnar en Adobe Client Care-biljett som begÃ¤r CNAME-stÃ¶d](https://experienceleague.adobe.com/docs/target/using/cmp-resources-and-contact-information.html?lang=sv-SE&#reference_ACA3391A00EF467B87930A450050077C):

   * [!DNL Adobe Target]-klientkod:
   * SSL-certifikatvÃ¤rdnamn (exempel: `target.example.com target.example.org`):
   * InkÃ¶pare av SSL-certifikat (Adobe rekommenderas varmt, se FrÃ¥gor och svar): Adobe/kund
   * Om kunden kÃ¶per certifikatet, Ã¤ven kallat &quot;Bring Your Own Certificate&quot; (BYOC), fyll i dessa ytterligare uppgifter:
      * Certifikatorganisation (exempel: Company Inc):
      * Organisationsenhet fÃ¶r certifikat (valfritt, exempel: MarknadsfÃ¶ring):
      * Certifikatland (exempel: USA):
      * Certifikatdeland (exempel: Kalifornien):
      * Certifikatstad (exempel: San Jose):

1. Om Adobe kÃ¶per certifikatet arbetar Adobe med DigiCert fÃ¶r att kÃ¶pa och distribuera certifikatet pÃ¥ Adobe produktionsservrar.

   Om kunden kÃ¶per certifikatet (BYOC) skickar Adobe Client Care CSR-filen (Certificate Signing Request) till dig. AnvÃ¤nd CSR nÃ¤r du kÃ¶per certifikatet via den valfria certifikatutfÃ¤rdaren. NÃ¤r certifikatet har utfÃ¤rdats skickar du en kopia av certifikatet och eventuella mellanliggande certifikat till Adobe Client Care fÃ¶r distribution.

   Adobe Client Care meddelar dig nÃ¤r implementeringen Ã¤r klar.

1. Uppdatera `serverDomain` [documentation](../implement/client-side/atjs/atjs-functions/targetglobalsettings.md#serverdomain) till det nya CNAME-vÃ¤rdnamnet och stÃ¤ll in `overrideMboxEdgeServer` pÃ¥ `false` [documentation](../implement/client-side/atjs/atjs-functions/targetglobalsettings.md#overridemboxedgeserver) i at.js-konfigurationen.

## Vanliga frÃ¥gor

FÃ¶ljande information besvarar vanliga frÃ¥gor om att begÃ¤ra och implementera CNAME-stÃ¶d i Target:

### Kan jag tillhandahÃ¥lla mitt eget certifikat (ta med ditt eget certifikat eller BYOC)?

Du kan ange ett eget certifikat. Adobe rekommenderar dock inte detta tillvÃ¤gagÃ¥ngssÃ¤tt. Hanteringen av SSL-certifikatets livscykel Ã¤r enklare fÃ¶r bÃ¥de Adobe och dig om Adobe kÃ¶per och kontrollerar certifikatet. SSL-certifikaten mÃ¥ste fÃ¶rnyas varje Ã¥r. DÃ¤rfÃ¶r mÃ¥ste Adobe Client Care kontakta dig varje Ã¥r fÃ¶r att fÃ¥ ett nytt certifikat i tid. Vissa kunder kan fÃ¥ svÃ¥rt att snabbt fÃ¥ fram ett fÃ¶rnyat certifikat. Implementeringen av [!DNL Target] Ã¤ventyras nÃ¤r certifikatet upphÃ¶r att gÃ¤lla eftersom webblÃ¤sare nekar anslutningar.

>[!WARNING]
>
>Om du begÃ¤r en CNAME-implementering av [!DNL Target]-ditt eget certifikat ansvarar du fÃ¶r att tillhandahÃ¥lla fÃ¶rnyade certifikat till Adobe Client Care varje Ã¥r. Om du tillÃ¥ter att ditt CNAME-certifikat upphÃ¶r att gÃ¤lla innan Adobe kan distribuera ett fÃ¶rnyat certifikat uppstÃ¥r ett driftstopp fÃ¶r din specifika [!DNL Target]-implementering.

### Hur lÃ¤nge till mitt nya SSL-certifikat upphÃ¶r att gÃ¤lla?

Alla certifikat som kÃ¶pts av Adobe gÃ¤ller i ett Ã¥r. Mer information finns i [DigiCert-artikeln om ettÃ¥rscertifikat](https://www.digicert.com/blog/position-on-1-year-certificates).

### Vilka vÃ¤rdnamn ska jag vÃ¤lja? Hur mÃ¥nga vÃ¤rdnamn per domÃ¤n ska jag vÃ¤lja?

FÃ¶r implementeringar av mÃ¥l-CNAME krÃ¤vs bara ett vÃ¤rdnamn per domÃ¤n i SSL-certifikatet och i kundens DNS. Adobe rekommenderar ett vÃ¤rdnamn per domÃ¤n. Vissa kunder krÃ¤ver fler vÃ¤rdnamn per domÃ¤n fÃ¶r sina egna syften (till exempel testning i mellanlagring), vilket stÃ¶ds.

De flesta kunder vÃ¤ljer ett vÃ¤rdnamn som `target.example.com`. Adobe rekommenderar att du fÃ¶ljer den hÃ¤r metoden, men i slutÃ¤ndan Ã¤r det ditt val. BegÃ¤r inte ett vÃ¤rdnamn fÃ¶r en befintlig DNS-post. Om du gÃ¶r det uppstÃ¥r en konflikt och det tar lÃ¤ngre tid att lÃ¶sa din [!DNL Target] CNAME-begÃ¤ran.

### Jag har redan en CNAME-implementering fÃ¶r Adobe Analytics, kan jag anvÃ¤nda samma certifikat eller vÃ¤rdnamn?

Nej, [!DNL Target] krÃ¤ver ett separat vÃ¤rdnamn och certifikat.

### PÃ¥verkar min nuvarande implementering av [!DNL Target] av ITP 2.x?

Apple ITP (Intelligent Tracking Prevention) version 2.3 introducerade funktionen fÃ¶r hantering av CNAME-insvepning, som kan identifiera [!DNL Target] CNAME-implementeringar och minskar cookiens giltighetstid till sju dagar. FÃ¶r nÃ¤rvarande har [!DNL Target] ingen lÃ¶sning fÃ¶r ITP:s CNAME-insvepningsÃ¥tgÃ¤rder. Mer information om ITP finns i [Apple Intelligent Tracking Prevention (ITP) 2.x](../before-implement/privacy/apple-itp-2x.md).

### Vilken typ av tjÃ¤nstavbrott kan jag fÃ¶rvÃ¤nta mig nÃ¤r CNAME-implementeringen distribueras?

Det uppstÃ¥r inga avbrott i tjÃ¤nsten nÃ¤r certifikatet distribueras (inklusive certifikatfÃ¶rnyelse).

NÃ¤r du har Ã¤ndrat vÃ¤rdnamnet i implementeringskoden fÃ¶r [!DNL Target] (`serverDomain` in at.js) till det nya CNAME-vÃ¤rdnamnet (`target.example.com`) behandlar webblÃ¤sare Ã¥terkommande besÃ¶kare som nya besÃ¶kare. Returnerade besÃ¶kares profildata gÃ¥r fÃ¶rlorade eftersom den tidigare cookien inte Ã¤r tillgÃ¤nglig under det gamla vÃ¤rdnamnet (`clientcode.tt.omtrdc.net`). Den tidigare cookien Ã¤r inte tillgÃ¤nglig pÃ¥ grund av sÃ¤kerhetsmodeller i webblÃ¤saren. Denna stÃ¶rning intrÃ¤ffar endast vid den fÃ¶rsta brytningen till den nya CNAME. CertifikatfÃ¶rnyelser har inte samma effekt eftersom vÃ¤rdnamnet inte Ã¤ndras.

### Vilken nyckeltyp och certifikatsignaturalgoritm anvÃ¤nds fÃ¶r min CNAME-implementering?

Alla certifikat Ã¤r RSA SHA-256 och nycklarna Ã¤r RSA 2048-bitars som standard. Nyckelstorlekar som Ã¤r stÃ¶rre Ã¤n 2 048 bitar ska begÃ¤ras explicit via [!UICONTROL Customer Care].

### Hur verifierar jag att CNAME-implementeringen Ã¤r klar fÃ¶r trafik?

AnvÃ¤nd fÃ¶ljande kommandouppsÃ¤ttning (i kommandoradsterminalen i macOS eller Linux, med bash och curl >=7.49):

1. Kopiera och klistra in den hÃ¤r basfunktionen i terminalen, eller klistra in funktionen i den grundlÃ¤ggande startskriptfilen (vanligen `~/.bash_profile` eller `~/.bashrc`) sÃ¥ att funktionen Ã¤r tillgÃ¤nglig fÃ¶r alla terminalsessioner:

   +++ Se detaljer

   ```bash {line-numbers="true"}
    function adobeTargetCnameValidation {
   
     local hostname="$1"
   
     if [ -z "$hostname" ]; then
       echo "ERROR: no hostname specified"
       return 1
     fi
   
     local service="Adobe Target CNAME implementation"
     local edges="41 42 44 45 46 47 48"
     local edgeDomain="tt.omtrdc.net"
     local edgeFormat="mboxedge%d%s.$edgeDomain"
     local poolDomain="pool.data.adobedc.net"
     local shards=5
     local shardsFoundCount=0
     local shardsFound=""
     local shardsFoundOutput=""
     local curlRegex="subject:.*CN=|expire date:|issuer:"
     local curlValidation="SSL certificate verify ok"
     local curlResponseValidation='"OK"'
     local curlEndpoint="/uptime?mboxClient=uptime3"
     local url="https://$hostname$curlEndpoint"
     local sslShopperUrl="https://www.sslshopper.com/ssl-checker.html#hostname=$hostname"
     local success="âœ…"
     local failure="ðŸš«"
     local info="ðŸ”Ž"
     local rule="="
     local horizontalRule="$(seq ${COLUMNS:-30} | xargs printf "$rule%.0s")"
     local miniRule="$(seq 5 | xargs printf "$rule%.0s")"
     local curlVersion="$(curl --version | head -1 | cut -d' ' -f2)"
     local curlVersionRequired=7.49
     local edgeCount="$(wc -w <<< "$edges" | tr -d ' ')"
     local cnameExists=""
     local endToEndTestSucceeded=""
   
     for region in IRL1 IND1 SIN OR SYD VA TYO; do
       local currShard="${region}-${poolDomain}"
       local curlResult="$(curl -vsm20 --connect-to "$hostname:443:$currShard:443" "$url" 2>&1)"
   
       if grep -q "$curlValidation" <<< "$curlResult"; then
         shardsFound+=" $currShard"
   
         if grep -q "$curlResponseValidation" <<< "$curlResult"; then
           shardsFoundCount=$((shardsFoundCount+1))
           shardsFoundOutput+="\n\n$miniRule $success $hostname [edge shard: $currShard] $miniRule\n"
         else
           shardsFoundOutput+="\n\n$miniRule $failure $hostname [edge shard: $currShard] $miniRule\n"
         fi
   
         shardsFoundOutput+="$(grep -E "$curlRegex" <<< "$curlResult" | sort)"
   
         if ! grep -q "$curlResponseValidation" <<< "$curlResult"; then
           shardsFoundOutput+="\nERROR: unexpected HTTP response from this shard using $url"
         fi
       fi
     done
   
     echo
     echo "$horizontalRule"
     echo
     echo "$service validation for hostname $hostname:"
   
     local dnsOutput="$(dig -t CNAME +short "$hostname" 2>&1)"
     if grep -qFi ".$edgeDomain" <<< "$dnsOutput"; then
       echo "$success $hostname passes DNS CNAME validation"
       cnameExists=true
     else
       echo -n "$failure $hostname FAILED DNS CNAME validation -- "
       if [ -n "$dnsOutput" ]; then
         echo -e "$dnsOutput is not in the subdomain $edgeDomain"
       else
         echo "required DNS CNAME record pointing to <target-client-code>.$edgeDomain not found"
       fi
     fi
   
     for region in IRL1 IND1 SIN OR SYD VA TYO; do
       local curlResult="$(curl -vsm20 --connect-to "$hostname:443:${region}-pool.data.adobedc.net:443" "https://$hostname$curlEndpoint" 2>&1)"
   
       if grep -q "$curlValidation" <<< "$curlResult"; then
         if grep -q "$curlResponseValidation" <<< "$curlResult"; then
           echo -en "$success $hostname passes TLS and HTTP response validation for region $region"
           if [ -n "$cnameExists" ]; then
             echo
           else
             echo " -- the DNS CNAME is not pointing to the correct subdomain for ${service}s with Adobe-managed certificates" \
               "(bring-your-own-certificate implementations don't have this requirement), but this test passes as configured"
           fi
           endToEndTestSucceeded=true
         else
           echo -n "$failure $hostname FAILED HTTP response validation for region $region --" \
             "unexpected response from $url -- "
           if [ -n "$cnameExists" ]; then
             echo "DNS is NOT pointing to the correct shard, notify Adobe Client Care"
           else
             echo "the required DNS CNAME record is missing, see above"
           fi
         fi
       else
         echo -n "$failure $hostname FAILED TLS validation for region $region -- "
         if [ -n "$cnameExists" ]; then
           echo "DNS is likely NOT pointing to the correct shard or there's a validation issue with the certificate or" \
             "protocols, see curl output below and optionally SSL Shopper ($sslShopperUrl):"
           echo ""
           echo "$horizontalRule"
           echo "$curlResult" | sed 's/^/    /g'
           echo "$horizontalRule"
           echo ""
         else
           echo "the required DNS CNAME record is missing, see above"
         fi
       fi
     done
   
     if [ "$shardsFoundCount" -ge "$edgeCount" ]; then
       echo -n "$success $hostname passes shard validation for the following $shardsFoundCount edge shards:"
       echo -e "$shardsFoundOutput"
       echo
   
       if [ -n "$cnameExists" ] && [ -n "$endToEndTestSucceeded" ]; then
         echo "$horizontalRule"
         echo ""
         echo "  For additional TLS/SSL validation, see SSL Shopper:"
         echo ""
         echo "    $info  $sslShopperUrl"
         echo ""
         echo "  To check DNS propagation around the world, see whatsmydns.net:"
         echo ""
         echo "    $info  DNS A records:     https://whatsmydns.net/#A/$hostname"
         echo "    $info  DNS CNAME record:  https://whatsmydns.net/#CNAME/$hostname"
       fi
     else
       echo -n "$failure $hostname FAILED shard validation -- shards found: $shardsFoundCount," \
         "expected: $edgeCount"
       echo ""
     fi
   
     echo
     echo "$horizontalRule"
     echo
   }
   ```

   +++

1. Klistra in det hÃ¤r kommandot (ersÃ¤tt `target.example.com` med ditt vÃ¤rdnamn):

   `adobeTargetCnameValidation target.example.com`

   Om implementeringen Ã¤r klar visas utdata som nedan. Den viktiga delen Ã¤r att alla valideringsstatusrader visar `âœ…` i stÃ¤llet fÃ¶r `ðŸš«`. Varje CNAME-mÃ¥lserver ska visa `CN=target.example.com`, vilket matchar det primÃ¤ra vÃ¤rdnamnet pÃ¥ det begÃ¤rda certifikatet (ytterligare SAN-vÃ¤rdnamn pÃ¥ certifikatet skrivs inte ut i dessa utdata).

+++ Se detaljer

```bash {line-numbers="true"}
  $ adobeTargetCnameValidation 
  target.example.com==========================================================Adobe Target CNAME implementation validation for hostname target.example.com:
  âœ… target.example.com passes DNS CNAME validation
  âœ… target.example.com passes TLS and HTTP response validation for region IRL1
  âœ… target.example.com passes TLS and HTTP response validation for region IND1
  âœ… target.example.com passes TLS and HTTP response validation for region SIN
  âœ… target.example.com passes TLS and HTTP response validation for region OR
  âœ… target.example.com passes TLS and HTTP response validation for region SYD
  âœ… target.example.com passes TLS and HTTP response validation for region VA
  âœ… target.example.com passes TLS and HTTP response validation for region TYO
  âœ… target.example.com passes shard validation for the following 7 edge shards:===== âœ… target.example.com [edge shard: IRL1-pool.data.adobedc.net] =====
  *  expire date: Feb 20 23:59:59 2026 GMT
  *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
  *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com===== âœ… target.example.com [edge shard: IND1-pool.data.adobedc.net] =====
  *  expire date: Feb 20 23:59:59 2026 GMT
  *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
  *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com===== âœ… target.example.com [edge shard: SIN-pool.data.adobedc.net] =====
  *  expire date: Feb 20 23:59:59 2026 GMT
  *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
  *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com===== âœ… target.example.com [edge shard: OR-pool.data.adobedc.net] =====
  *  expire date: Feb 20 23:59:59 2026 GMT
  *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
  *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com===== âœ… target.example.com [edge shard: SYD-pool.data.adobedc.net] =====
  *  expire date: Feb 20 23:59:59 2026 GMT
  *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
  *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com===== âœ… target.example.com [edge shard: VA-pool.data.adobedc.net] =====
  *  expire date: Feb 20 23:59:59 2026 GMT
  *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
  *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com===== âœ… target.example.com [edge shard: TYO-pool.data.adobedc.net] =====
  *  expire date: Feb 20 23:59:59 2026 GMT
  *  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1
  *  subject: C=US; ST=California; L=San Jose; O=Adobe Systems Incorporated; CN=target.example.com==========================================================  For additional TLS/SSL validation, see SSL Shopper:    ðŸ”Ž  https://www.sslshopper.com/ssl-checker.html#hostname=target.example.com  To check DNS propagation around the world, see whatsmydns.net:    ðŸ”Ž  DNS A records:     https://whatsmydns.net/#A/target.example.com
      ðŸ”Ž  DNS CNAME record:  https://whatsmydns.net/#CNAME/target.example.com 
```

+++

>[!NOTE]
>
>Om det hÃ¤r verifieringskommandot misslyckas vid DNS-validering men du redan har gjort de nÃ¶dvÃ¤ndiga DNS-Ã¤ndringarna, kan du behÃ¶va vÃ¤nta tills DNS-uppdateringarna har spridit sig helt. DNS-poster har en associerad [TTL (time-to-live)](https://en.wikipedia.org/wiki/Time_to_live#DNS_records) som anger cachefÃ¶rfallotid fÃ¶r DNS-svar fÃ¶r dessa poster. DÃ¤rfÃ¶r kan du behÃ¶va vÃ¤nta Ã¥tminstone sÃ¥ lÃ¤nge som TTL:erna Ã¤r klara. Du kan anvÃ¤nda kommandot `dig target.example.com` eller [ G Suite-verktygslÃ¥dan ](https://toolbox.googleapps.com/apps/dig/#CNAME) fÃ¶r att leta upp dina specifika TTL-filer. Information om hur du kontrollerar DNS-spridning Ã¶ver hela vÃ¤rlden finns i [whatsmydns.net](https://whatsmydns.net/#CNAME).

### Hur anvÃ¤nder jag en lÃ¤nk fÃ¶r avanmÃ¤lan med CNAME?

Om du anvÃ¤nder CNAME bÃ¶r lÃ¤nken fÃ¶r avanmÃ¤lan innehÃ¥lla parametern &quot;client=`clientcode`, till exempel:
`https://my.cname.domain/optout?client=clientcode`.

ErsÃ¤tt `clientcode` med din klientkod och lÃ¤gg sedan till texten eller bilden som ska lÃ¤nkas till [avanmÃ¤lnings-URL:en](privacy/privacy.md).

## KÃ¤nda begrÃ¤nsningar

* QA-lÃ¤get Ã¤r inte fast nÃ¤r du har CNAME och at.js 1.x eftersom det baseras pÃ¥ en cookie frÃ¥n tredje part. Du kan komma runt problemet genom att lÃ¤gga till fÃ¶rhandsgranskningsparametrarna i varje URL som du navigerar till. QA-lÃ¤get Ã¤r fast nÃ¤r du har CNAME och at.js 2.x.
* NÃ¤r du anvÃ¤nder CNAME blir det mer sannolikt att storleken pÃ¥ cookie-huvudet fÃ¶r [!DNL Target] anrop Ã¶kar. Adobe rekommenderar att kakstorleken hÃ¥lls under 8 kB.
